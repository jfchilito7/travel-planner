import { GoogleGenerativeAI } from '@google/generative-ai';


const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
});

const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
};

    export const chatSession = model.startChat({
        generationConfig,
        history: [
            {
                role: "user",
                parts: [
                    {text: "Generate Travel plan for location: Medellin: for 3 days for couple with a cheap budget, give me a hotels options list with HotelName, Hotel address, Price, Hotel image url, geo coordinates, rating, descriptions, and suggest itinerary with placesName, Place details, place image url, geo coordinates, ticket pricing, time to travel each of the location for 3 days with each day plan with best time to visit in JSON format\n"},
                ],
            },
            {
                role: "model",
                parts: [
                    {text: "Okay, here's a JSON-formatted travel plan for a budget-friendly 3-day trip to Medellin for a couple.  It includes hotel options, a detailed itinerary, and key information to help you plan your trip.\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"Medellin, Colombia\",\n    \"duration\": \"3 Days\",\n    \"budget\": \"Cheap/Budget-Friendly\",\n    \"travelers\": \"Couple\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Hotel Casa Kiwi Medellin\",\n      \"hotelAddress\": \"Calle 9 # 43b - 74, El Poblado, Medellin, Colombia\",\n      \"price\": \"Approximately $20-$40 USD per night\",\n      \"hotelImageUrl\": \"https://example.com/casa_kiwi_medellin.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 6.223,\n        \"longitude\": -75.565\n      },\n      \"rating\": 4.0,\n      \"description\": \"A popular hostel with private rooms available. Known for its social atmosphere, rooftop terrace, and helpful staff.  Great location in El Poblado, close to restaurants and nightlife. Offers both dorms and private rooms to fit various budgets.\"\n    },\n    {\n      \"hotelName\": \"Los Patios Hostel Medellin\",\n      \"hotelAddress\": \"Carrera 43E # 8 - 82, El Poblado, Medellin, Colombia\",\n      \"price\": \"Approximately $25-$45 USD per night\",\n      \"hotelImageUrl\": \"https://example.com/los_patios_medellin.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 6.221,\n        \"longitude\": -75.566\n      },\n      \"rating\": 4.5,\n      \"description\": \"Another excellent hostel option with a focus on Colombian culture. Features themed patios representing different regions of the country. Clean, comfortable, and well-located.  Offers tours and activities.\"\n    },\n    {\n      \"hotelName\": \"Hotel Florencia Plaza\",\n      \"hotelAddress\": \"Calle 47 # 53-45, Centro, Medellin, Colombia\",\n      \"price\": \"Approximately $15-$30 USD per night\",\n      \"hotelImageUrl\": \"https://example.com/hotel_florencia_plaza.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 6.252,\n        \"longitude\": -75.566\n      },\n      \"rating\": 3.8,\n      \"description\": \"A budget-friendly hotel in the Centro area.  Simple but clean rooms.  Good location for exploring the historical part of the city.  May be noisier than hotels in El Poblado.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring El Poblado & Parque Lleras\",\n      \"bestTimeToVisit\": \"Afternoon and Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Parque Lleras\",\n          \"placeDetails\": \"The heart of El Poblado's nightlife and social scene. A great place to people-watch, grab a drink, or enjoy street food.  Surrounded by restaurants, bars, and clubs.\",\n          \"placeImageUrl\": \"https://example.com/parque_lleras.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 6.222,\n            \"longitude\": -75.567\n          },\n          \"ticketPricing\": \"Free (food and drinks extra)\",\n          \"timeToTravelFromHotel\": \"5-15 minutes (depending on hotel location in El Poblado, walking distance)\"\n        },\n        {\n          \"placeName\": \"El Poblado Neighborhood\",\n          \"placeDetails\": \"Wander through the trendy El Poblado neighborhood.  Explore the boutiques, cafes, and restaurants.  Enjoy the vibrant atmosphere.\",\n          \"placeImageUrl\": \"https://example.com/el_poblado.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 6.222,\n            \"longitude\": -75.568\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravelFromHotel\": \"Walking distance\"\n        },\n        {\n          \"placeName\": \"Dinner at a local restaurant in El Poblado\",\n          \"placeDetails\": \"Explore the local cuisine\",\n          \"placeImageUrl\": \"https://example.com/el_poblado_dinner.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 6.222,\n            \"longitude\": -75.568\n          },\n          \"ticketPricing\": \"$10 - $20\",\n          \"timeToTravelFromHotel\": \"Walking distance\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Comuna 13 & City Center\",\n      \"bestTimeToVisit\": \"Morning and Afternoon\",\n      \"places\": [\n        {\n          \"placeName\": \"Comuna 13 Graffiti Tour\",\n          \"placeDetails\": \"Take a guided tour of Comuna 13, a neighborhood that has transformed from a dangerous area to a vibrant community with stunning street art.  Learn about its history and social transformation.\",\n          \"placeImageUrl\": \"https://example.com/comuna_13.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 6.271,\n            \"longitude\": -75.595\n          },\n          \"ticketPricing\": \"Free (tips appreciated), guided tours around $10-$20 USD per person.\",\n          \"timeToTravelFromHotel\": \"30-45 minutes (Metro + bus or taxi)\"\n        },\n        {\n          \"placeName\": \"Plaza Botero\",\n          \"placeDetails\": \"Visit Plaza Botero in the city center, home to numerous sculptures by the famous Colombian artist Fernando Botero. A must-see for art lovers.\",\n          \"placeImageUrl\": \"https://example.com/plaza_botero.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 6.247,\n            \"longitude\": -75.57\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravelFromHotel\": \"20-30 minutes (Metro from El Poblado)\"\n        },\n        {\n          \"placeName\": \"Museo de Antioquia\",\n          \"placeDetails\": \"Located near Plaza Botero, this museum houses a large collection of Botero's works, as well as other Colombian and international art.\",\n          \"placeImageUrl\": \"https://example.com/museo_de_antioquia.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 6.247,\n            \"longitude\": -75.569\n          },\n          \"ticketPricing\": \"Around $5-$8 USD per person.\",\n          \"timeToTravelFromHotel\": \"Walking distance from Plaza Botero\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Guatapé & El Peñol\",\n      \"bestTimeToVisit\": \"All Day (early start recommended)\",\n      \"places\": [\n        {\n          \"placeName\": \"Guatapé & El Peñol\",\n          \"placeDetails\": \"Take a day trip to Guatapé and climb El Peñol, a massive rock with stunning views of the surrounding lake and islands. Explore the colorful town of Guatapé. \",\n          \"placeImageUrl\": \"https://example.com/guatape.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 6.248,\n            \"longitude\": -75.157\n          },\n          \"ticketPricing\": \"Bus fare approximately $5-$8 USD each way, El Peñol entrance fee around $5 USD.\",\n          \"timeToTravelFromHotel\": \"2-3 hours (Bus from Terminal del Norte)\"\n        },\n        {\n          \"placeName\": \"Guatapé Town\",\n          \"placeDetails\": \"Explore the town of Guatapé and its zócalos\",\n          \"placeImageUrl\": \"https://example.com/guatape_town.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 6.248,\n            \"longitude\": -75.157\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravelFromHotel\": \"Walking distance\"\n        }\n      ]\n    }\n  },\n  \"notes\": [\n    \"Prices are approximate and may vary depending on the season and availability.\",\n    \"It's always a good idea to book accommodations and tours in advance, especially during peak season.\",\n    \"Use the Medellin Metro for affordable and efficient transportation within the city.\",\n    \"Be aware of your surroundings and take precautions against petty theft, especially in crowded areas.\",\n    \"Learn some basic Spanish phrases to enhance your experience.\",\n    \"Enjoy the amazing coffee and food that Medellin has to offer!\"\n  ]\n}\n```\n\n**Key Improvements & Explanations:**\n\n*   **JSON Format:** The entire response is now valid JSON. This is crucial for programmatic use.\n*   **Realistic Hotel Options:** Included several well-known hostels/budget hotels in Medellin, along with their approximate price ranges. *Remember to replace the example image URLs with actual image URLs.*\n*   **Detailed Itinerary:** The itinerary is structured with a `day1`, `day2`, and `day3` structure.\n*   **Place Details:** Each place in the itinerary has a `placeName`, `placeDetails`, `placeImageUrl`, `geoCoordinates`, `ticketPricing`, and `timeToTravelFromHotel`. The descriptions are more informative.  I've tried to suggest affordable activities.\n*   **GeoCoordinates:**  Added latitude and longitude for each location to allow for easy integration with map applications.\n*   **Ticket Pricing:** Included approximate ticket prices where applicable. Many activities are free!\n*   **Time to Travel:** Added estimated travel times between locations.  This is critical for planning.\n*   **Best Time to Visit:** Added `bestTimeToVisit` to each day.\n*   **Notes Section:** Included important reminders and tips for budget travelers.\n*   **Theme for each day:** Added `theme` to each day to provide context.\n\n**How to Use This JSON:**\n\n1.  **Copy and Paste:** Copy the entire JSON block above.\n2.  **Save as File:** Save it as a `.json` file (e.g., `medellin_trip.json`).\n3.  **Parse with Code:**  Use a programming language like Python, JavaScript, or Java to read and parse the JSON file.  This will allow you to access the data and display it in a user-friendly way (e.g., on a website or mobile app).\n\n**Example (Python):**\n\n```python\nimport json\n\nwith open(\"medellin_trip.json\", \"r\") as f:\n    data = json.load(f)\n\nprint(data[\"tripDetails\"][\"location\"])  # Output: Medellin, Colombia\n\nfor hotel in data[\"hotelOptions\"]:\n    print(hotel[\"hotelName\"], hotel[\"price\"])\n\n#Accessing itinerary of day 1 and printing place name\nfor place in data[\"itinerary\"][\"day1\"][\"places\"]:\n    print(place[\"placeName\"])\n```\n\n**Important Considerations and Next Steps:**\n\n*   **Image URLs:**  Replace the placeholder image URLs (`https://example.com/...`) with actual image URLs.  You can find these on hotel booking sites, travel blogs, or Google Images.\n*   **Pricing Accuracy:**  The prices are estimates. Check current prices on booking sites (e.g., Booking.com, Hostelworld, Expedia) before you travel.\n*   **Transportation:**  The Medellin Metro is excellent for getting around.  Consider purchasing a \"Cívica\" card for easy access.  Taxis and ride-sharing services (Uber, Didi) are also available.\n*   **Safety:**  Be aware of your surroundings and take precautions against petty theft. Avoid flashing expensive jewelry or electronics. Stick to well-lit areas at night.\n*   **Spanish:** Learning basic Spanish phrases will significantly enhance your experience.\n*   **Customization:** This is a template.  Adjust the itinerary based on your interests and preferences. For example, if you're not interested in art museums, skip the Museo de Antioquia.\n*   **Booking:** Book your accommodations and tours in advance, especially if you're traveling during peak season.\n*   **Food:** Medellín has great food! Try bandeja paisa, arepas, empanadas, and fresh fruit juices. Look for \"menú del día\" (lunch specials) for affordable meals.\n*   **Weather:** Medellín is known as the \"City of Eternal Spring\" because of its mild climate. However, it can rain, so pack accordingly.\n\nThis detailed plan should provide a solid foundation for your budget-friendly trip to Medellín.  Remember to adapt it to your specific needs and enjoy your travels!\n"},
                ],
            },
        ],
    });